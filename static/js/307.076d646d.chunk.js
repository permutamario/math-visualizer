(self.webpackChunkmath_visualizer_react=self.webpackChunkmath_visualizer_react||[]).push([[307],{2834:(e,t,r)=>{"use strict";r.d(t,{j:()=>n});class n{constructor(e){const t=this.constructor;if(!t.id||!t.name||!t.renderingType)throw new Error("Plugin class must have static id, name, and renderingType properties");this.id=t.id,this.name=t.name,this.description=t.description||"No description provided",this.renderingType=t.renderingType,this.core=e,this.isLoaded=!1,this._eventHandlers=[],this._animationHandlers=[],this._visualParameters=[],this._structuralParameters=[],this._advancedParameters=[]}async load(){if(this.isLoaded)return!0;try{return console.log("Loading plugin: ".concat(this.name," (").concat(this.id,")")),this.renderEnv=this.core.getRenderingEnvironment(),await this.start(),this.isLoaded=!0,!0}catch(e){return console.error("Error loading plugin ".concat(this.id,":"),e),await this.unload(),!1}}async start(){}async unload(){if(!this.isLoaded)return!0;try{return console.log("Unloading plugin: ".concat(this.name," (").concat(this.id,")")),this._cancelAllAnimations(),this._removeAllEventHandlers(),this.isLoaded=!1,this.renderEnv=null,this._visualParameters=[],this._structuralParameters=[],this._advancedParameters=[],!0}catch(e){return console.error("Error unloading plugin ".concat(this.id,":"),e),!1}}addSlider(e,t,r){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"visual";const a={id:e,type:"slider",label:t,default:r,min:void 0!==n.min?n.min:0,max:void 0!==n.max?n.max:100,step:void 0!==n.step?n.step:1};return this._addParameter(a,i),this}addCheckbox(e,t,r){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"visual";const i={id:e,type:"checkbox",label:t,default:r};return this._addParameter(i,n),this}addColor(e,t,r){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"visual";const i={id:e,type:"color",label:t,default:r};return this._addParameter(i,n),this}addColorPalette(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"colorPalette",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Color Palette",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"visual";const n=this.getPaletteInfo(),i=this.getCurrentPaletteName(),a=n.map((e=>({value:e.id,label:e.name})));return this.addDropdown(e,t,i,a,r),this}addDropdown(e,t,r,n){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"visual";const a={id:e,type:"dropdown",label:t,default:r,options:n};return this._addParameter(a,i),this}addNumber(e,t,r){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"visual";const a={id:e,type:"number",label:t,default:r};return void 0!==n.min&&(a.min=n.min),void 0!==n.max&&(a.max=n.max),void 0!==n.step&&(a.step=n.step),this._addParameter(a,i),this}addText(e,t,r){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"visual";const i={id:e,type:"text",label:t,default:r};return this._addParameter(i,n),this}_addParameter(e,t){switch(t){case"visual":this._visualParameters.push(e);break;case"structural":this._structuralParameters.push(e);break;case"advanced":this._advancedParameters.push(e);break;default:console.warn("Unknown parameter group: ".concat(t,", defaulting to visual")),this._visualParameters.push(e),t="visual"}const r=t.charAt(0).toUpperCase()+t.slice(1),n="addParameters".concat(r);this.core&&"function"===typeof this.core[n]?this.core[n]([e]):console.warn("Cannot add parameter ".concat(e.id," - no method available for group ").concat(t))}removeParameter(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(!this.core||"function"!==typeof this.core.removeParameter)return console.warn("Core removeParameter method not available"),!1;const r=this.core.removeParameter(e,t);if(r){const r=t=>{const r=t.findIndex((t=>t.id===e));return-1!==r&&(t.splice(r,1),!0)};if(t)switch(t){case"visual":r(this._visualParameters);break;case"structural":r(this._structuralParameters);break;case"advanced":r(this._advancedParameters)}else r(this._visualParameters)||r(this._structuralParameters)||r(this._advancedParameters)}return r}emptyParameters(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(e)switch(e){case"visual":this._visualParameters=[];break;case"structural":this._structuralParameters=[];break;case"advanced":this._advancedParameters=[];break;default:return console.warn("Unknown parameter group: ".concat(e)),!1}else this._visualParameters=[],this._structuralParameters=[],this._advancedParameters=[];return this.core&&"function"===typeof this.core.emptyParameters?this.core.emptyParameters(e):(console.warn("Core emptyParameters method not available"),!1)}setParameter(e,t){return!(!this.core||"function"!==typeof this.core.changeParameter)&&this.core.changeParameter(e,t)}getParameter(e){if(this.core&&"function"===typeof this.core.getAllParameters){return this.core.getAllParameters()[e]}}getAllParameters(){return this.core&&"function"===typeof this.core.getAllParameters?this.core.getAllParameters():{}}addAction(e,t,r){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return!(!this.core||"function"!==typeof this.core.addAction)&&this.core.addAction(e,t,r,n)}removeAction(e){return!(!this.core||"function"!==typeof this.core.removeAction)&&this.core.removeAction(e)}refresh(){}requestAnimation(e){if(!this.core||!this.core.animationManager||"function"!==typeof this.core.animationManager.requestAnimation)return console.warn("Animation manager not available"),null;const t=this.core.animationManager.requestAnimation(e);return t&&this._animationHandlers.push(t),t}cancelAnimation(e){if(!this.core||!this.core.animationManager||"function"!==typeof this.core.animationManager.cancelAnimation)return!1;this.core.animationManager.cancelAnimation(e);const t=this._animationHandlers.indexOf(e);return-1!==t&&(this._animationHandlers.splice(t,1),!0)}_cancelAllAnimations(){this.core&&this.core.animationManager&&"function"===typeof this.core.animationManager.cancelAnimation&&(this._animationHandlers.forEach((e=>{this.core.animationManager.cancelAnimation(e)})),this._animationHandlers=[])}onParameterChanged(e,t,r){}handleInteraction(e,t){}_removeAllEventHandlers(){this._eventHandlers.forEach((e=>{var t;if(e.target&&e.type&&e.callback)"function"===typeof e.target.off&&e.target.off(e.type,e.callback);else if("parameterChanged"===e.type){var r;null===(r=this.core)||void 0===r||r.removeParameterCallback(e.callback)}else if("action"===e.type){var n;null===(n=this.core)||void 0===n||n.removeActionCallback(e.callback)}else"paletteChanged"===e.type&&null!==(t=this.core)&&void 0!==t&&t.events&&this.core.events.off("paletteChanged",e.callback)})),this._eventHandlers=[]}_handleParameterChanged(e,t,r){try{"function"===typeof this.onParameterChanged&&this.onParameterChanged(e,t,r),this.refresh()}catch(n){console.error("Error handling parameter change in plugin ".concat(this.id,":"),n)}}_handleActionExecution(e){try{const i=this.core._actions.get(e);if(i&&"function"===typeof i.callback){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];const e=i.callback(...r);return this.refresh(),e}}catch(i){console.error("Error executing action ".concat(e," in plugin ").concat(this.id,":"),i),this.core&&this.core.uiManager&&this.core.uiManager.showError("Action failed: ".concat(i.message))}return!1}getStructuralColor(e){return this.core&&this.core.colorSchemeManager?this.core.colorSchemeManager.getStructuralColor(e):"#000000"}getMainColor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return this.core&&this.core.colorSchemeManager?this.core.colorSchemeManager.getMainColor(e):"#000000"}getMainColors(){return this.core&&this.core.colorSchemeManager?this.core.colorSchemeManager.getMainColors():[]}getFunctionalColor(e){return this.core&&this.core.colorSchemeManager?this.core.colorSchemeManager.getFunctionalColor(e):"#000000"}onPaletteChanged(e){this.core&&this.core.events&&(this.core.events.on("paletteChanged",e),this._eventHandlers.push({type:"paletteChanged",callback:e}))}getPaletteInfo(){return this.core&&this.core.colorSchemeManager?this.core.colorSchemeManager.getPaletteInfo():[]}getCurrentPaletteName(){return this.core&&this.core.colorSchemeManager?this.core.colorSchemeManager.getCurrentPaletteName():"default"}setCurrentPalette(e){return!(!this.core||!this.core.colorSchemeManager)&&this.core.colorSchemeManager.setCurrentPalette(e)}}},3307:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>o});var n=r(4705),i=r(2834);class a extends i.j{constructor(e){super(e),this.renderingType="3d",this._meshes=new Set,this._groups=new Set,this._geometries=new Set,this._materials=new Set,this._textures=new Set,this._lights=new Set,this.mainMeshGroup=null,this._currentRenderMode=null,this._currentRenderOptions=null}addMesh(e){return e?(this._meshes.add(e),this.addToScene(e),e):null}addGroup(e){return e?(this._groups.add(e),e):null}addGeometry(e){return e?(this._geometries.add(e),e):null}addMaterial(e){return e?(this._materials.add(e),e):null}addTexture(e){return e?(this._textures.add(e),e):null}addLight(e){return e?(this._lights.add(e),this.addToScene(e),e):null}createBox(e,t){if(!this.renderEnv||!this.renderEnv.THREE)return console.error("THREE.js not available in rendering environment"),null;const r=this.renderEnv.THREE,n={width:e.width||1,height:e.height||1,depth:e.depth||1,widthSegments:e.widthSegments||1,heightSegments:e.heightSegments||1,depthSegments:e.depthSegments||1},i=new r.BoxGeometry(n.width,n.height,n.depth,n.widthSegments,n.heightSegments,n.depthSegments);this.addGeometry(i);const a=new r.Mesh(i,t);return this.addMesh(a)}createSphere(e,t){if(!this.renderEnv||!this.renderEnv.THREE)return console.error("THREE.js not available in rendering environment"),null;const r=this.renderEnv.THREE,n={radius:e.radius||1,widthSegments:e.widthSegments||32,heightSegments:e.heightSegments||16},i=new r.SphereGeometry(n.radius,n.widthSegments,n.heightSegments);this.addGeometry(i);const a=new r.Mesh(i,t);return this.addMesh(a)}createCylinder(e,t){if(!this.renderEnv||!this.renderEnv.THREE)return console.error("THREE.js not available in rendering environment"),null;const r=this.renderEnv.THREE,n={radiusTop:void 0!==e.radiusTop?e.radiusTop:1,radiusBottom:void 0!==e.radiusBottom?e.radiusBottom:1,height:e.height||1,radialSegments:e.radialSegments||32,heightSegments:e.heightSegments||1,openEnded:e.openEnded||!1},i=new r.CylinderGeometry(n.radiusTop,n.radiusBottom,n.height,n.radialSegments,n.heightSegments,n.openEnded);this.addGeometry(i);const a=new r.Mesh(i,t);return this.addMesh(a)}createPlane(e,t){if(!this.renderEnv||!this.renderEnv.THREE)return console.error("THREE.js not available in rendering environment"),null;const r=this.renderEnv.THREE,n={width:e.width||1,height:e.height||1,widthSegments:e.widthSegments||1,heightSegments:e.heightSegments||1},i=new r.PlaneGeometry(n.width,n.height,n.widthSegments,n.heightSegments);this.addGeometry(i);const a=new r.Mesh(i,t);return this.addMesh(a)}createLineSegments(e,t){if(!this.renderEnv||!this.renderEnv.THREE)return console.error("THREE.js not available in rendering environment"),null;const r=this.renderEnv.THREE,n=(new r.BufferGeometry).setFromPoints(e);this.addGeometry(n);const i=new r.LineSegments(n,t);return this.addMesh(i)}createAmbientLight(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!this.renderEnv||!this.renderEnv.THREE)return console.error("THREE.js not available in rendering environment"),null;const t=this.renderEnv.THREE,r={color:void 0!==e.color?e.color:16777215,intensity:void 0!==e.intensity?e.intensity:1},n=new t.AmbientLight(r.color,r.intensity);return this.addLight(n)}createDirectionalLight(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!this.renderEnv||!this.renderEnv.THREE)return console.error("THREE.js not available in rendering environment"),null;const t=this.renderEnv.THREE,r={color:void 0!==e.color?e.color:16777215,intensity:void 0!==e.intensity?e.intensity:1,position:e.position||[1,1,1],castShadow:e.castShadow||!1},n=new t.DirectionalLight(r.color,r.intensity);return n.position.set(...r.position),n.castShadow=r.castShadow,this.addLight(n)}createPointLight(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!this.renderEnv||!this.renderEnv.THREE)return console.error("THREE.js not available in rendering environment"),null;const t=this.renderEnv.THREE,r={color:void 0!==e.color?e.color:16777215,intensity:void 0!==e.intensity?e.intensity:1,distance:void 0!==e.distance?e.distance:0,decay:void 0!==e.decay?e.decay:2,position:e.position||[0,0,0],castShadow:e.castShadow||!1},n=new t.PointLight(r.color,r.intensity,r.distance,r.decay);return n.position.set(...r.position),n.castShadow=r.castShadow,this.addLight(n)}createSpotLight(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!this.renderEnv||!this.renderEnv.THREE)return console.error("THREE.js not available in rendering environment"),null;const t=this.renderEnv.THREE,r={color:void 0!==e.color?e.color:16777215,intensity:void 0!==e.intensity?e.intensity:1,distance:void 0!==e.distance?e.distance:0,angle:void 0!==e.angle?e.angle:Math.PI/3,penumbra:void 0!==e.penumbra?e.penumbra:0,decay:void 0!==e.decay?e.decay:2,position:e.position||[0,1,0],castShadow:e.castShadow||!1},n=new t.SpotLight(r.color,r.intensity,r.distance,r.angle,r.penumbra,r.decay);return n.position.set(...r.position),n.castShadow=r.castShadow,this.addLight(n)}createStandardMaterial(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!this.renderEnv||!this.renderEnv.THREE)return console.error("THREE.js not available in rendering environment"),null;const t=this.renderEnv.THREE,r=new t.MeshStandardMaterial({color:void 0!==e.color?e.color:16777215,roughness:void 0!==e.roughness?e.roughness:.5,metalness:void 0!==e.metalness?e.metalness:.5,opacity:void 0!==e.opacity?e.opacity:1,transparent:void 0!==e.opacity?e.opacity<1:e.transparent||!1,map:e.map||null,side:e.side||t.DoubleSide});return this.addMaterial(r)}createBasicMaterial(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!this.renderEnv||!this.renderEnv.THREE)return console.error("THREE.js not available in rendering environment"),null;const t=this.renderEnv.THREE,r=new t.MeshBasicMaterial({color:void 0!==e.color?e.color:16777215,opacity:void 0!==e.opacity?e.opacity:1,transparent:void 0!==e.opacity?e.opacity<1:e.transparent||!1,wireframe:e.wireframe||!1,map:e.map||null,side:e.side||t.DoubleSide});return this.addMaterial(r)}createLineMaterial(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!this.renderEnv||!this.renderEnv.THREE)return console.error("THREE.js not available in rendering environment"),null;const t=new this.renderEnv.THREE.LineBasicMaterial({color:void 0!==e.color?e.color:0,linewidth:void 0!==e.linewidth?e.linewidth:1,opacity:void 0!==e.opacity?e.opacity:1,transparent:void 0!==e.opacity?e.opacity<1:e.transparent||!1});return this.addMaterial(t)}addToScene(e){return e?this.renderEnv&&this.renderEnv.scene?(this.renderEnv.scene.add(e),e):(console.error("Scene not available in rendering environment"),e):null}removeFromScene(e){return!!e&&(this.renderEnv&&this.renderEnv.scene?(this.renderEnv.scene.remove(e),!0):(console.error("Scene not available in rendering environment"),!1))}setMainMesh(e){return e?(this.mainMeshGroup&&this.removeFromScene(this.mainMeshGroup),this.mainMeshGroup=e,this.addToScene(this.mainMeshGroup),this._currentRenderMode&&this.applyRenderMode(this._currentRenderMode,this._currentRenderOptions),this.mainMeshGroup):null}createGroup(){if(!this.renderEnv||!this.renderEnv.THREE)return console.error("THREE.js not available in rendering environment"),null;const e=new this.renderEnv.THREE.Group;return this.addGroup(e)}setCameraPosition(e,t,r){return this.renderEnv&&this.renderEnv.camera?(this.renderEnv.camera.position.set(e,t,r),!0):(console.error("Camera not available in rendering environment"),!1)}lookAt(e,t,r){return this.renderEnv&&this.renderEnv.camera?(this.renderEnv.camera.lookAt(e,t,r),!0):(console.error("Camera not available in rendering environment"),!1)}resetCamera(){return this.renderEnv&&this.renderEnv.resetCamera?(this.renderEnv.resetCamera(),!0):(console.error("Reset camera function not available in rendering environment"),!1)}applyRenderMode(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.core&&this.core.renderModeManager?this.mainMeshGroup?(this._currentRenderMode=e,this._currentRenderOptions=t,"string"===typeof t.colorPalette&&this.core.colorSchemeManager&&(t.colorPalette=this.core.colorSchemeManager.getPalette(t.colorPalette)),this.core.renderModeManager.applyRenderMode(this.renderEnv.scene,this.mainMeshGroup,e,t)):(console.warn("No main mesh group available to apply render mode"),!1):(console.error("Render mode manager not available"),!1)}updateRenderProperties(e){return this.core&&this.core.renderModeManager?this.mainMeshGroup?("string"===typeof e.colorPalette&&this.core.colorSchemeManager&&(e.colorPalette=this.core.colorSchemeManager.getPalette(e.colorPalette)),this.core.renderModeManager.updateProperties(e,this.mainMeshGroup),this._currentRenderOptions&&(void 0!==e.opacity&&(this._currentRenderOptions.opacity=e.opacity),void 0!==e.colorPalette&&(this._currentRenderOptions.colorPalette=e.colorPalette)),!0):(console.warn("No main mesh group available to update render properties"),!1):(console.error("Render mode manager not available"),!1)}render(){return!(!this.renderEnv||!this.renderEnv.renderer)&&("function"===typeof this.renderEnv.render?(this.renderEnv.render(this.core.getAllParameters()),!0):!!(this.renderEnv.renderer&&this.renderEnv.scene&&this.renderEnv.camera)&&(this.renderEnv.renderer.render(this.renderEnv.scene,this.renderEnv.camera),!0))}refresh(){this.render()}async unload(){try{return this.mainMeshGroup&&(this.removeFromScene(this.mainMeshGroup),this.mainMeshGroup=null),this._meshes.forEach((e=>{e&&this.removeFromScene(e)})),this._lights.forEach((e=>{e&&this.removeFromScene(e)})),this._materials.forEach((e=>{e&&"function"===typeof e.dispose&&e.dispose()})),this._geometries.forEach((e=>{e&&"function"===typeof e.dispose&&e.dispose()})),this._textures.forEach((e=>{e&&"function"===typeof e.dispose&&e.dispose()})),this._meshes.clear(),this._groups.clear(),this._geometries.clear(),this._materials.clear(),this._textures.clear(),this._lights.clear(),this._currentRenderMode=null,this._currentRenderOptions=null,await super.unload()}catch(e){return console.error("Error unloading plugin ".concat(this.id,":"),e),!1}}}r(8239);class o extends a{constructor(e){super(e),this.families=[],this.currentFamily=null}async start(){this.addCheckbox("showEdges","Show Edges",!0),this.addColorPalette(),this.addDropdown("renderMode","Render Mode","standard",["standard","metallic","glass","toon"],"visual"),this.addSlider("opacity","Opacity",.85,{min:.1,max:1,step:.05},"visual"),await this.discoverFamilies(),this.setParameters(),this.createPolytope(),this.updateVisualization()}async discoverFamilies(){try{const t=await fetch("/math-visualizer/plugins/polytope-viewer/families/manifest.json");if(!t.ok)throw new Error("Failed to load polytope families manifest: ".concat(t.statusText));const n=await t.json();this.families=[];for(const i of n)try{const e=await r(5110)("./".concat(i.file)),t=new(0,e.default)(this,i.name);this.families.push({id:i.id,name:i.name,instance:t}),console.log("Loaded polytope family: ".concat(i.name))}catch(e){console.error("Error loading polytope family ".concat(i.name,":"),e)}this.families.length>0&&(this.currentFamily=this.families[0].instance)}catch(e){console.error("Failed to discover polytope families:",e),this.core&&this.core.uiManager&&this.core.uiManager.showError("Failed to load polytope families: ".concat(e.message))}}setParameters(){if(this.emptyParameters("structural"),this.families.length>0){var e;const t=this.families.map((e=>({value:e.id,label:e.name})));this.addDropdown("familyType","Polytope Family",(null===(e=this.families.find((e=>e.instance===this.currentFamily)))||void 0===e?void 0:e.id)||this.families[0].id,t,"structural"),this.currentFamily&&this.currentFamily.addFamilyParameters()}}createPolytope(){return!!this.currentFamily&&this.currentFamily.createPolytope()}updateVisualization(){if(!this.currentFamily)return;const e=this.currentFamily.createMesh();this.setMainMesh(e),this.applyRenderMode(this.getParameter("renderMode")||"standard",{opacity:this.getParameter("opacity")||.85,colorPalette:this.getParameter("colorPalette")||"default"})}onParameterChanged(e,t,r){if("familyType"===e){const e=this.families.find((e=>e.id===t));e&&(this.currentFamily=e.instance,this.setParameters(),this.createPolytope(),this.updateVisualization())}else"structural"===r?(this.createPolytope(),this.updateVisualization()):"showEdges"===e?this.updateVisualization():"opacity"===e||"colorPalette"===e?this.updateRenderProperties({opacity:this.getParameter("opacity"),colorPalette:this.getParameter("colorPalette")}):"renderMode"===e&&this.applyRenderMode(t,{opacity:this.getParameter("opacity"),colorPalette:this.getParameter("colorPalette")})}async unload(){this.families=[],this.currentFamily=null,await super.unload()}}o.id="polytope-visualization",(0,n.A)(o,"name","Polytope Visualization"),o.description="Visualize various 3D polytope families",o.renderingType="3d"},5110:(e,t,r)=>{var n={"./ArchimedeanSolids":[8735,9,735],"./ArchimedeanSolids.js":[8735,9,735],"./Associahedron":[387,9,387],"./Associahedron.js":[387,9,387],"./Cyclohedron":[934,9,934],"./Cyclohedron.js":[934,9,934],"./OrbitPolytope":[7550,9,550],"./OrbitPolytope.js":[7550,9,550],"./Permutahedron":[6284,9,284],"./Permutahedron.js":[6284,9,284],"./PlatonicSolids":[2060,9,60],"./PlatonicSolids.js":[2060,9,60],"./RootPolytope":[9796,9,796],"./RootPolytope.js":[9796,9,796],"./Stellahedron":[7629,9,629],"./Stellahedron.js":[7629,9,629],"./data/archimedean_solids":[9266,3,266],"./data/archimedean_solids.json":[9266,3,266],"./manifest":[2414,3,414],"./manifest.json":[2414,3,414]};function i(e){if(!r.o(n,e))return Promise.resolve().then((()=>{var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=n[e],i=t[0];return r.e(t[2]).then((()=>r.t(i,16|t[1])))}i.keys=()=>Object.keys(n),i.id=5110,e.exports=i},8239:(e,t,r)=>{"use strict";let n;r.d(t,{A:()=>i});try{n=window.QuickHull,n||Promise.resolve().then((function(){var e=new Error("Cannot find module '../../utils/QuickHull.js'");throw e.code="MODULE_NOT_FOUND",e})).then((e=>{n=e.default})).catch((e=>{console.error("Error importing QuickHull:",e),n=(e,t)=>(console.warn("Using fallback QuickHull (very basic)"),[[0,1,2],[0,2,3],[0,3,1],[1,3,2]])}))}catch(a){console.error("Error accessing QuickHull:",a),n=(e,t)=>(console.warn("Using fallback QuickHull (very basic)"),[[0,1,2],[0,2,3],[0,3,1],[1,3,2]])}const i=class{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Unnamed Polytope";this.plugin=e,this.name=t,this.vertices=[],this.faces=[],this.edges=[],this.center=[0,0,0]}calculateCenter(){if(0===this.vertices.length)return[0,0,0];const e=this.vertices.reduce(((e,t)=>[e[0]+t[0],e[1]+t[1],e[2]+t[2]]),[0,0,0]),t=this.vertices.length;return[e[0]/t,e[1]/t,e[2]/t]}calculateVertices(){throw new Error("calculateVertices must be implemented by subclasses")}addFamilyParameters(){throw new Error("addFamilyParameters must be implemented by subclasses")}createPolytope(){this.vertices=this.calculateVertices();const e=n(this.vertices,{skipTriangulation:!0});this.faces=e;const t=new Set;this.faces.forEach((e=>{const r=e.length;for(let n=0;n<r;n++){const i=e[n],a=e[(n+1)%r],o=i<a?"".concat(i,"-").concat(a):"".concat(a,"-").concat(i);t.add(o)}})),this.edges=Array.from(t,(e=>e.split("-").map(Number)))}createMesh(){return function(e,t,r,n){const{THREE:i}=e.renderEnv,a=e.createGroup(),o=e.getParameter("colorPalette")||"default",s=e.core.colorSchemeManager.getPalette(o),l=e.getParameter("opacity")||.85,c=l<1;if(r.forEach(((r,n)=>{if(r.length<3)return;const o=new i.Color(s[n%s.length]),d=e.addGeometry(new i.BufferGeometry),h=[];for(const e of r){if(void 0===e||e<0||e>=t.length)return void console.error("Invalid vertex index ".concat(e," in face ").concat(n));const r=t[e];h.push(r[0],r[1],r[2])}d.setAttribute("position",new i.Float32BufferAttribute(h,3));const u=[];for(let e=1;e<r.length-1;e++)u.push(0,e,e+1);d.setIndex(u),d.computeVertexNormals();const m=e.addMaterial(new i.MeshStandardMaterial({color:o,transparent:c,opacity:l,side:i.DoubleSide})),p=e.addMesh(new i.Mesh(d,m));a.add(p)})),n&&e.getParameter("showEdges")){const r=new i.Color(0),o=e.addMaterial(new i.LineBasicMaterial({color:r,transparent:c,opacity:Math.min(1,l+.1)}));n.forEach((r=>{if(void 0===r[0]||void 0===r[1]||r[0]<0||r[0]>=t.length||r[1]<0||r[1]>=t.length)return void console.error("Invalid edge indices: ".concat(r));const n=t[r[0]],s=t[r[1]];if(!n||!s)return void console.error("Vertex missing for edge ".concat(r));const l=[new i.Vector3(n[0],n[1],n[2]),new i.Vector3(s[0],s[1],s[2])],c=e.addGeometry((new i.BufferGeometry).setFromPoints(l)),d=e.addMesh(new i.Line(c,o));a.add(d)}))}return a}(this.plugin,this.vertices,this.faces,this.edges)}}}}]);
//# sourceMappingURL=307.076d646d.chunk.js.map